#!/bin/bash

# Configure sub-command Name
new_Accent="nyaa" # new command creates project
delete_Accent="nyee" # delete command deletes project
list_Accent="list" # list command, list available template

# DO NOT TOUCH
condition="$1"
message="$1"
Lang="$2"
ProjectName="$3"
date="$(date +"%I:%M:%S %p")"
curdir="$(pwd)"
ProjectName2="$ProjectName"_"$date"

easter_egg() {
    echo " /\_/\   Hola!"
    echo "( o.o )  nyaa --help"
    echo " > ^ <   nyaa v1.2"
}

info() {
    echo "nyaa nyaa <Language> <ProjectName>  creates a project"
    echo "nyaa nyee <ProjectName>             Deletes the Project"
    echo "nyaa list                           List Templates"
    echo "nyaa \"Message\"                      Add and Commit Project with Message"
    echo "nyaa clean                          clean up folders /bin /build"
    echo "nyaa                                compile and run or ???"
}

init_git() {
    git init
    git branch -m master development
    git add .
    git commit -m "Create development Branch"
    git branch release
}

commit_git() {
    git add .
    git commit -m "$message"
}

# Main Logic
if [[ "$condition" = "$new_Accent" ]]; then

    if [[ -d "$curdir/$ProjectName" ]]; then
        mkdir -p "$curdir/$ProjectName2"
        cp -r ~/.config/MonyekaTemplates/"$Lang"/* "$curdir/$ProjectName2/"
        cd "$curdir/$ProjectName2"
        init_git
        cd ..
        exit 1
    else
        mkdir -p "$curdir/$ProjectName"
        cp -r ~/.config/MonyekaTemplates/"$Lang"/* "$curdir/$ProjectName/"
        cd "$curdir/$ProjectName"
        init_git
        cd ..
        exit 0
    fi

elif [[ "$condition" = "$delete_Accent" && -n "$2" ]]; then
    echo "nyeeeeee $2..."
    sudo rm -r "$curdir/$2"
    echo "nyee."
    exit 1
elif [[ "$condition" = "$list_Accent" ]]; then
    ls ~/.config/MonyekaTemplates
    exit 0
elif [[ -n "$condition" && "$condition" != "--help" ]]; then
    if [[ "$condition" = "clean" ]]; then
        make clean
        exit 0
    else
        commit_git
        exit 0
    fi
elif [[ -z "$condition" ]]; then
    if [[ -f "$curdir/Makefile" ]]; then 
        make
        exit 0
    else
        easter_egg
        exit 0
    fi
elif [[ "$condition" = "--help" ]]; then
    info
    exit 0;
fi



